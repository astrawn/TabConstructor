<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="custom.css">
	<meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Add bootstrap -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <!-- Add jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <script>
    function addbar(){
      var text = $('#tab');
      text.val(text.val() + "e |-------------------------------------------------------------------------------------------|\nB |-------------------------------------------------------------------------------------------|\nG |-------------------------------------------------------------------------------------------|\nD |-------------------------------------------------------------------------------------------|\nA |-------------------------------------------------------------------------------------------|\nE |-------------------------------------------------------------------------------------------|\n\n");
    }
  </script>

  <script>
    function addchord(chord){
      switch(chord){
        case "A":

          break;
        case "B":

          break;
        case "C":

          break;
        case "D":

          break;
        case "E":

          break;
        case "F":

          break;
        case "G":

          break;
        case "Custom":

          break;

      }

    }
      
  </script>
  

  <script>

    key = 0;

    function keyPress(e){
      var keynum;

      if(window.event) { // IE                  
        keynum = e.keyCode;
      } else if(e.which){ // Netscape/Firefox/Opera                 
        keynum = e.which;
      }

      key = keynum;
      
    }
  </script>

  <script>
    function insert(ctrl){
      var index = document.getElementById(ctrl).selectionStart;
      var end = document.getElementById(ctrl).value.length;

      if(key != 8 && key != 46){
        var text = document.getElementById(ctrl).value;
        var newtext = text.substr(0, index) + text.substr(index+1, end-index);
        document.getElementById(ctrl).value = newtext; 
      }
      /*else{
        text = document.getElementById(ctrl).value;
        newtext = text.substr(0, index) + "--" + text.substr(index+1, end-index);
        document.getElementById(ctrl).value = newtext;
      }*/
      document.getElementById(ctrl).focus();
      document.getElementById.selectionEnd = index;
    }
  </script>

  <script>
    function download(filename, text){
      var element = document.createElement('a');
      element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
      element.setAttribute('download', filename);

      element.style.display = 'none';
      document.body.appendChild(element);

      element.click();

      document.body.removeChild(element);
    }
  </script>

  <script>
    function copyToClipboard(){
      let textarea = document.getElementById("tab");
      textarea.select();
      document.execCommand("copy");
      textarea.blur();
    }
  </script>

  <script>
    function copyChord(){

    }
  </script>

  <script>
    function insertChord(){
      var textArea = document.getElementById("chorddisplay");
      var arrayOfLines = textArea.value.split("\n");
      var index = document.getElementById("tab").selectionStart;
      var end = document.getElementById("tab").value.length;

      var text = document.getElementById("tab").value;
      var newtext = text.substr(0, index) + arrayOfLines[0].charAt(7) + text.substr(index+1, end);
      index = index + 98;
      newtext = newtext.substr(0, index) + arrayOfLines[1].charAt(7) +newtext.substr(index+1, end);
      index = index + 98;
      newtext = newtext.substr(0, index) + arrayOfLines[2].charAt(7) +newtext.substr(index+1, end);
      index = index + 98;
      newtext = newtext.substr(0, index) + arrayOfLines[3].charAt(7) +newtext.substr(index+1, end);
      index = index + 98;
      newtext = newtext.substr(0, index) + arrayOfLines[4].charAt(7) +newtext.substr(index+1, end);
      index = index + 98;
      newtext = newtext.substr(0, index) + arrayOfLines[5].charAt(7) +newtext.substr(index+1, end);
      document.getElementById("tab").value = newtext;
      document.getElementById("tab").focus();

    }
  </script>
</head>
<body>
  <div class="banner jumbotron text-center">
    <h1><strong>TabConstructor</strong></h1>
    <h4>Tabs made easy!</h4>
  </div>
  
  <div class="customcontainer1">
    <div class="row">
      <div class="col-sm">
        <label class="customlabel" for="tab">Tab Sheet:</label>
        <!--onkeydown="keyPress(event)" oninput="insert(this.id)"-->
        <textarea class="customtextarea" id="tab" name="tab" placeholder="e |-------------------------------------------------------------------------------------------|&#13;&#10;B |-------------------------------------------------------------------------------------------|&#13;&#10;G |-------------------------------------------------------------------------------------------|&#13;&#10;D |-------------------------------------------------------------------------------------------|&#13;&#10;A |-------------------------------------------------------------------------------------------|&#13;&#10;E |-------------------------------------------------------------------------------------------|&#13;&#10;"></textarea>
        <br>
      </div>
      <div class="col-sm">
        <div class="customcontainer2">
          <div class="row mt-2 ml-3">
            <button class="btn-mybtn" onClick="addbar()">Add Bar</button>
          </div>
          <div class="row mt-2 ml-3">
              <label class="mr-2" for="chords">Chords:</label>
              <select name="chords" id="chords" onchange="addchord()">
                <option selected value>--</option>
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
                <option value="D">D</option>
                <option value="E">E</option>
                <option value="F">F</option>
                <option value="G">G</option>
                <option value="Custom">Custom</option>
              </select>
              <select class="ml-2" name="sharpflat" id="sharpflat" onchange="">
                <option selected value>--</option>
                <option value="sharp">&#x266f;</option>
                <option value="flat">&#x266d;</option>
              </select>
          </div>
          <div class="row mt-2 ml-1">
            <div class="col-sm">
              <label class="mr-2 ml-2" for="customizer">Customize:</label>
              <div class="mr-2 ml-4 mb-2" name="customizer" id="customizer">
                <label class="mr-2" for="e-string">e:</label>
                <input disabled class="custominput" type="number" max="40" name="e-string" id="e-string" onblur=""/>
                <br>
                <label class="mr-2" for="b-string">B:</label>
                <input disabled class="custominput" type="number" max="40" name="b-string" id="b-string" onblur=""/>
                <br>
                <label class="mr-2" for="g-string">G:</label>
                <input disabled class="custominput" type="number" max="40" name="g-string" id="g-string" onblur=""/>
                <br>
                <label class="mr-2" for="d-string">D:</label>
                <input disabled class="custominput" type="number" max="40" name="d-string" id="d-string" onblur=""/>
                <br>
                <label class="mr-2" for="a-string">A:</label>
                <input disabled class="custominput" type="number" max="40" name="a-string" id="a-string" onblur=""/>
                <br>
                <label class="mr-2" for="E-string">E:</label>
                <input disabled class="custominput" type="number" max="40" name="E-string" id="E-string" onblur=""/>
              </div>
              <label class="mr-2 ml-2" for="chordoptions">Options:</label>
              <div class="mr-2 ml-4" name="chordoptions" id="chordoptions">
                <label class="mr-2" for="chordformat">Format:</label>
                <select name="chordformat" id="chordformat" onchange="">
                  <option selected value="Full">Full</option>
                  <option value="Inner">Inner</option>
                </select>
              </div>
            </div>
            <div class="col-sm">
              <br><br>
              <textarea readonly class="customtextarea2" id="chorddisplay" name="chorddisplay">e |----0---|&#013;&#010;B |----2---|&#013;&#010;G |----2---|&#013;&#010;D |----2---|&#013;&#010;A |----0---|&#013;&#010;E |----x---|</textarea>
              <br>
              <button class="btn-mybtn" id="cpchord" name="cpchord" style="width: 120px" onclick="copyChord()">Copy Chord</button>
              <br>
              <button class="btn-mybtn mt-2" id="insertchord" name="insertchord" style="width: 120px" onclick="insertChord()">Insert Chord</button>
            </div>
          </div>
          <div class="row mt-4 ml-3 mb-2">
            <button class="btn-mybtn mr-2" id="cpbtn" name="cpbtn" onclick="copyToClipboard()">Copy to Clipboard</button>
            <button class="btn-mybtn" id="dlbtn" name="dlbtn" onclick="download('mytab.txt', document.getElementById('tab').value)">Download as .txt File</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
</html> 